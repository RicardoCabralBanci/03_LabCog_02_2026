# Plugins (Extensões) - Extensões modulares do sistema

> Fonte: `docs/plugin.md` e `docs/plugins/manifest.md` do repositório MoltBot

## O que são Plugins?

Plugins são **módulos TypeScript** carregados em runtime que estendem o MoltBot com funcionalidades extras. Rodam in-process com o Gateway.

## O que um Plugin pode registrar

- **Gateway RPC methods** — Métodos de comunicação
- **Gateway HTTP handlers** — Endpoints HTTP
- **Agent tools** — Ferramentas para o agente usar
- **CLI commands** — Comandos de terminal
- **Background services** — Serviços em segundo plano
- **Skills** — Skills empacotadas dentro do plugin
- **Auto-reply commands** — Comandos que executam SEM invocar IA

## Manifesto obrigatório: `moltbot.plugin.json`

```json
{
  "id": "meu-plugin",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {}
  }
}
```

Campos opcionais: `kind`, `channels`, `providers`, `skills`, `name`, `description`, `uiHints`, `version`

## Descoberta e precedência

1. **Config paths** — `plugins.load.paths`
2. **Workspace extensions** — `<workspace>/.clawdbot/extensions/`
3. **Global extensions** — `~/.clawdbot/extensions/`
4. **Bundled** — enviado com o MoltBot (desabilitado por padrão)

## Diferença entre Skills, Hooks e Plugins

| Aspecto | Skills | Hooks | Plugins |
|---------|--------|-------|---------|
| **O que é** | Pacote de conhecimento | Script event-driven | Módulo de código |
| **Linguagem** | Markdown + scripts | TypeScript | TypeScript |
| **Quando executa** | Quando acionada por contexto | Quando evento dispara | Sempre carregado |
| **Complexidade** | Baixa | Média | Alta |
| **Pode registrar ferramentas** | Não (só instrui) | Não | Sim |
| **Pode registrar comandos** | Não | Não | Sim |

## Configuração

```json
{
  "plugins": {
    "enabled": true,
    "allow": ["voice-call"],
    "deny": ["untrusted"],
    "entries": {
      "voice-call": { "enabled": true, "config": { "provider": "twilio" } }
    }
  }
}
```

## Plugin Slots (categorias exclusivas)

Algumas categorias só permitem um plugin ativo por vez (ex: `memory`):
```json
{ "plugins": { "slots": { "memory": "memory-core" } } }
```

## CLI

```bash
moltbot plugins list              # Listar
moltbot plugins install <path>    # Instalar
moltbot plugins enable <id>       # Ativar
moltbot plugins disable <id>      # Desativar
moltbot plugins doctor            # Diagnóstico
```

## Relevância para o LabCog

Plugins representam o nível mais profundo de extensão. Para o LabCog, a ideia de registrar ferramentas customizadas (agent tools) e comandos slash pode ser muito útil para criar integrações específicas com nossos processos.
