# Ideia: CRUD de Afazeres com Banco de Dados

## Motivação

O sistema de TODO do Claude Code é volátil — morre com a conversa. Precisamos de algo **persistente** que acompanhe o progresso dos projetos entre sessões, com histórico e rastreabilidade.

## Conceito

Criar um sistema CRUD (Create, Read, Update, Delete) de afazeres apoiado por um **banco de dados** (SQLite), permitindo que o Claude Code e o usuário gerenciem tarefas de forma duradoura.

## Operações CRUD

| Operação   | Descrição                                      |
|------------|-------------------------------------------------|
| **Create** | Criar nova tarefa com título, descrição, prioridade, projeto |
| **Read**   | Listar/filtrar tarefas por status, projeto, prioridade, data |
| **Update** | Alterar status, descrição, prioridade, atribuir responsável  |
| **Delete** | Remover tarefa (soft delete com flag, manter histórico)      |

## Estrutura sugerida do banco (SQLite)

```sql
CREATE TABLE projetos (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nome TEXT NOT NULL,
    descricao TEXT,
    criado_em DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE afazeres (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    projeto_id INTEGER,
    titulo TEXT NOT NULL,
    descricao TEXT,
    status TEXT DEFAULT 'pendente',   -- pendente, em_andamento, concluido
    prioridade TEXT DEFAULT 'normal', -- urgente, normal, baixa
    criado_em DATETIME DEFAULT CURRENT_TIMESTAMP,
    atualizado_em DATETIME DEFAULT CURRENT_TIMESTAMP,
    concluido_em DATETIME,
    deletado INTEGER DEFAULT 0,       -- soft delete
    FOREIGN KEY (projeto_id) REFERENCES projetos(id)
);

CREATE TABLE historico (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    afazer_id INTEGER,
    campo_alterado TEXT,
    valor_anterior TEXT,
    valor_novo TEXT,
    alterado_em DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (afazer_id) REFERENCES afazeres(id)
);
```

## Vantagens sobre o TODO do Claude Code

| Aspecto        | Claude Code TODO       | CRUD com DB           |
|----------------|------------------------|-----------------------|
| Persistência   | Apenas na conversa     | Permanente em arquivo |
| Histórico      | Não tem                | Tabela de histórico   |
| Filtros        | Básico (por status)    | Por projeto, data, prioridade |
| Entre sessões  | Perde tudo             | Mantém tudo           |
| Dependências   | Sim (em memória)       | Sim (em banco)        |

## Próximos passos

- [ ] Definir escopo mínimo (MVP) do CRUD
- [ ] Criar o banco SQLite
- [ ] Desenvolver scripts Python para as operações
- [ ] Integrar com o fluxo de trabalho do Claude Code
- [ ] Testar com tarefas reais dos subprojetos
